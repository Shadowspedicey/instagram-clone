(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n.n(r),s=n(53),a=n.n(s),i=n(18),o=n(16),u=n(75),l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return!0;case"STOP_LOADING":return!1;default:return e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.payload;case"SIGN_OUT":return null;default:return e}},j=n(50),d={message:"Empty",severity:"success",open:!1},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SNACKBAR":return{message:t.payload.message,severity:t.payload.severity,open:!0};case"OPEN_SNACKBAR":return Object(j.a)(Object(j.a)({},e),{},{open:!0});case"CLOSE_SNACKBAR":return Object(j.a)(Object(j.a)({},e),{},{open:!1});default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEW_POST":return t.payload.file;default:return e}},f=Object(u.a)({loading:l,currentUser:A,snackbar:b,newPost:p}),O=Object(u.b)(f,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0})),h=n(0),m=n.n(h),x=n(2),v=n(9),g=n(15),w=n(99),N=n(108),k=n(102),y=n(47),C=n(103),S=Object(w.a)({apiKey:"AIzaSyAKrGd-3EdtXZUrsR9H3MOL-mTUS2XjDt8",authDomain:"instadicey.firebaseapp.com",projectId:"instadicey",storageBucket:"instadicey.appspot.com",messagingSenderId:"534824914170",appId:"1:534824914170:web:563f979c0b305ebbc54d43",measurementId:"G-VJDYJCZNQJ"}),E=(Object(N.a)(S),Object(k.a)(S)),P=Object(y.b)(S),z=Object(C.a)(S),I=n(28),D=n(7),U=n(178),L=n(180),T=n(176),R=function(e){return{type:"SET_CURRENT_USER",payload:e}},B=function(e,t){return{type:"SET_SNACKBAR",payload:{message:e,severity:t}}},M=n(6),Q=n(104),G=n.n(Q),F=n(60),Z=function(e){return{type:"SET_NEW_POST",payload:{file:e}}},H=n.p+"static/media/namelogo.37ef1c08.png",X=n.p+"static/media/logo.d4e48eb0.png",W=n.p+"static/media/loading.42aaa181.jpg",q=n(1),J=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.currentUser})),n=Object(r.useState)(!1),c=Object(v.a)(n,2),s=c[0],a=c[1],u=Object(r.useState)(null),l=Object(v.a)(u,2),A=l[0],j=l[1],d=Object(r.useState)([]),b=Object(v.a)(d,2),p=b[0],f=b[1],O=Object(r.useState)(!1),h=Object(v.a)(O,2),g=h[0],w=h[1],N=Object(r.useState)(""),k=Object(v.a)(N,2),y=k[0],C=k[1],S=function(){var e=Object(x.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.r)(Object(D.g)(E,"users",t.user.uid),Object(M.a)({},"recentSearches."+n,{uid:n,timestamp:Object(D.p)()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var n=Object(x.a)(m.a.mark((function n(){var r,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(!0),n.next=4,Object(D.h)(Object(D.g)(E,"users",t.user.uid)).then((function(e){return Object.values(e.data().recentSearches)}));case 4:return(r=n.sent).sort((function(e,t){return e.timestamp.seconds<t.timestamp.seconds?1:-1})),n.next=8,Promise.all(r.map(function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.h)(Object(D.g)(E,"users",t.uid)).then((function(e){return e.data()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:c=n.sent,f(c),a(!1),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(0),console.error(n.t0),e(B("Oops, try again later.","error"));case 17:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}(),z=function(){var e=Object(x.a)(m.a.mark((function e(n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),n.preventDefault(),e.prev=2,f(p.filter((function(e){return e.uid!==r}))),e.next=6,Object(D.r)(Object(D.g)(E,"users",t.user.uid),Object(M.a)({},"recentSearches."+r,Object(D.f)()));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var t=Object(x.a)(m.a.mark((function t(n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target.value,C(r),""!==r){t.next=4;break}return t.abrupt("return",P());case 4:if(a(!0),0!==(c=A||[]).length){t.next=19;break}return t.prev=7,t.next=10,Object(D.i)(Object(D.c)(E,"users"));case 10:t.sent.docs.forEach((function(e){return c.push(e.data())})),j(c),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(7),console.error(t.t0),e(B("Oops, try again later.","error"));case 19:c=c.filter((function(e){return e.username.includes(r)})).slice(0,15),f(c),a(!1);case 22:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(q.jsx)(G.a,{onOutsideClick:function(){return w(!1)},children:Object(q.jsxs)("div",{className:"searchbar-container",children:[Object(q.jsx)("input",{className:"search",placeholder:"Search",onFocus:function(){w(!0),""===y&&P()},onChange:I,value:y}),g?Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"arrow"}),Object(q.jsxs)("ul",{className:"search-list outlined",children:[""!==y||s?null:Object(q.jsxs)("div",{className:"recent",children:["Recent",Object(q.jsx)("button",{className:"text",onClick:function(){try{f([]),Object(D.r)(Object(D.g)(E,"users",t.user.uid),{recentSearches:[]})}catch(n){console.error(n),e(B("Oops, try again later.","error"))}},children:"Clear All"})]}),s?Object(q.jsx)("div",{className:"loading",children:Object(q.jsx)("img",{src:W,alt:"loading..."})}):p.map((function(e){return Object(q.jsx)("li",{children:Object(q.jsxs)(i.b,{to:"/".concat(e.username),onClick:function(){return t=e.uid,w(!1),C(""),void S(t);var t},children:[Object(q.jsx)("div",{className:"img-container outlined round",children:Object(q.jsx)("img",{src:e.profilePic,alt:"".concat(e.username,"'s Profile Pic'")})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)("span",{className:"username",children:e.username})," ",e.verified?Object(q.jsx)("div",{className:"verified",title:"Verified"}):null]}),Object(q.jsx)("span",{className:"real-name",children:e.realName})]}),Object(q.jsx)("div",{className:"remove",onClick:function(t){return z(t,e.uid)},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-x-lg",viewBox:"0 0 16 16",children:Object(q.jsx)("path",{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"})})})]})},e.username)}))]})]}):null]})})},V=function(){var e=Object(g.f)(),t=Object(g.g)(),n=Object(o.b)(),c=Object(r.useRef)(),s=Object(o.c)((function(e){return e.currentUser.info}))||"",a=s.username,u=s.profilePic,l=Object(r.useState)(!1),A=Object(v.a)(l,2),j=A[0],d=A[1],b=Object(r.useState)(!1),p=Object(v.a)(b,2),f=p[0],O=p[1],h=Object(F.useMediaQuery)({query:"(max-width: 600px)"}),w=function(e){e.stopPropagation(),O(!0),setTimeout((function(){d(!1),O(!1)}),125)},N=function(){var t=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"START_LOADING"}),t.next=3,Object(I.k)(P);case 3:e.push("/"),n({type:"STOP_LOADING"});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(q.jsxs)("nav",{id:"main-navbar",children:[Object(q.jsx)("div",{className:"logo",children:Object(q.jsx)(i.b,{to:"/",children:Object(q.jsx)("img",{src:h?X:H,alt:"Instadicey"})})}),Object(q.jsx)("li",{children:Object(q.jsx)(J,{})}),Object(q.jsxs)("ul",{children:[Object(q.jsx)("li",{children:Object(q.jsx)("button",{className:"add-post icon",onClick:function(){return c.current.click()},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M13 2v9h9v2h-9v9h-2v-9h-9v-2h9v-9h2zm2-2h-6v9h-9v6h9v9h6v-9h9v-6h-9v-9z"})})})}),Object(q.jsx)("input",{accept:"image/png, image/jpg, image/jpeg, image/pjpeg, image/jfif, image/pjp",type:"file",ref:c,onChange:function(t){var r=t.target.files[0];c.current.value=null,n(Z(r)),e.push("/create/style")}}),Object(q.jsx)("li",{children:Object(q.jsx)(i.b,{to:"/",className:"icon",children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:"/"===t.pathname?Object(q.jsx)("path",{d:"M21 13v10h-6v-6h-6v6h-6v-10h-3l12-12 12 12h-3zm-1-5.907v-5.093h-3v2.093l3 3z"}):Object(q.jsx)("path",{d:"M20 7.093v-5.093h-3v2.093l3 3zm4 5.907l-12-12-12 12h3v10h7v-5h4v5h7v-10h3zm-5 8h-3v-5h-8v5h-3v-10.26l7-6.912 7 6.99v10.182z"})})})}),Object(q.jsx)("li",{children:Object(q.jsx)(i.b,{to:"/direct/inbox",className:"icon",children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:t.pathname.includes("/direct/")?Object(q.jsx)("path",{d:"M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z"}):Object(q.jsx)("path",{d:"M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"})})})}),Object(q.jsxs)("li",{className:"profile",onClick:function(){return d(!0)},children:[Object(q.jsx)("div",{className:"icon",children:Object(q.jsx)("img",{src:u,alt:"Profile Pic"})}),j&&Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{className:"dropdown-container",onClick:w}),Object(q.jsxs)("div",{className:"dropdown outlined ".concat(f?"closed":""),children:[Object(q.jsx)("span",{className:"arrow"}),Object(q.jsxs)("ul",{children:[Object(q.jsx)("li",{children:Object(q.jsxs)(i.b,{to:"/".concat(a),onClick:w,children:[Object(q.jsx)("svg",{className:"icon",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M12 0c6.623 0 12 5.377 12 12s-5.377 12-12 12-12-5.377-12-12 5.377-12 12-12zm8.127 19.41c-.282-.401-.772-.654-1.624-.85-3.848-.906-4.097-1.501-4.352-2.059-.259-.565-.19-1.23.205-1.977 1.726-3.257 2.09-6.024 1.027-7.79-.674-1.119-1.875-1.734-3.383-1.734-1.521 0-2.732.626-3.409 1.763-1.066 1.789-.693 4.544 1.049 7.757.402.742.476 1.406.22 1.974-.265.586-.611 1.19-4.365 2.066-.852.196-1.342.449-1.623.848 2.012 2.207 4.91 3.592 8.128 3.592s6.115-1.385 8.127-3.59zm.65-.782c1.395-1.844 2.223-4.14 2.223-6.628 0-6.071-4.929-11-11-11s-11 4.929-11 11c0 2.487.827 4.783 2.222 6.626.409-.452 1.049-.81 2.049-1.041 2.025-.462 3.376-.836 3.678-1.502.122-.272.061-.628-.188-1.087-1.917-3.535-2.282-6.641-1.03-8.745.853-1.431 2.408-2.251 4.269-2.251 1.845 0 3.391.808 4.24 2.218 1.251 2.079.896 5.195-1 8.774-.245.463-.304.821-.179 1.094.305.668 1.644 1.038 3.667 1.499 1 .23 1.64.59 2.049 1.043z"})}),"Profile"]})}),Object(q.jsx)("li",{children:Object(q.jsxs)(i.b,{to:"/".concat(a,"/saved"),onClick:w,children:[Object(q.jsx)("svg",{className:"icon",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M5 0v24l7-6 7 6v-24h-14zm1 1h12v20.827l-6-5.144-6 5.144v-20.827z"})}),"Saved"]})}),Object(q.jsx)("li",{children:Object(q.jsxs)(i.b,{to:"/accounts/edit",onClick:w,children:[Object(q.jsx)("svg",{className:"icon",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M12 8.666c-1.838 0-3.333 1.496-3.333 3.334s1.495 3.333 3.333 3.333 3.333-1.495 3.333-3.333-1.495-3.334-3.333-3.334m0 7.667c-2.39 0-4.333-1.943-4.333-4.333s1.943-4.334 4.333-4.334 4.333 1.944 4.333 4.334c0 2.39-1.943 4.333-4.333 4.333m-1.193 6.667h2.386c.379-1.104.668-2.451 2.107-3.05 1.496-.617 2.666.196 3.635.672l1.686-1.688c-.508-1.047-1.266-2.199-.669-3.641.567-1.369 1.739-1.663 3.048-2.099v-2.388c-1.235-.421-2.471-.708-3.047-2.098-.572-1.38.057-2.395.669-3.643l-1.687-1.686c-1.117.547-2.221 1.257-3.642.668-1.374-.571-1.656-1.734-2.1-3.047h-2.386c-.424 1.231-.704 2.468-2.099 3.046-.365.153-.718.226-1.077.226-.843 0-1.539-.392-2.566-.893l-1.687 1.686c.574 1.175 1.251 2.237.669 3.643-.571 1.375-1.734 1.654-3.047 2.098v2.388c1.226.418 2.468.705 3.047 2.098.581 1.403-.075 2.432-.669 3.643l1.687 1.687c1.45-.725 2.355-1.204 3.642-.669 1.378.572 1.655 1.738 2.1 3.047m3.094 1h-3.803c-.681-1.918-.785-2.713-1.773-3.123-1.005-.419-1.731.132-3.466.952l-2.689-2.689c.873-1.837 1.367-2.465.953-3.465-.412-.991-1.192-1.087-3.123-1.773v-3.804c1.906-.678 2.712-.782 3.123-1.773.411-.991-.071-1.613-.953-3.466l2.689-2.688c1.741.828 2.466 1.365 3.465.953.992-.412 1.082-1.185 1.775-3.124h3.802c.682 1.918.788 2.714 1.774 3.123 1.001.416 1.709-.119 3.467-.952l2.687 2.688c-.878 1.847-1.361 2.477-.952 3.465.411.992 1.192 1.087 3.123 1.774v3.805c-1.906.677-2.713.782-3.124 1.773-.403.975.044 1.561.954 3.464l-2.688 2.689c-1.728-.82-2.467-1.37-3.456-.955-.988.41-1.08 1.146-1.785 3.126"})}),"Settings"]})}),Object(q.jsx)("li",{className:"log-out",onClick:function(){N()},children:"Log Out"})]})]})]})]})]})]})},Y=function(){return Object(q.jsx)("div",{className:"loading-page",children:Object(q.jsx)("div",{className:"loading",children:Object(q.jsx)("img",{src:X,alt:"Logo"})})})},K=function(e){return Object(q.jsx)("div",{className:"error-msg",children:e.text})},_=n.p+"static/media/email-verification.ef786c0a.png",$=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)(),c=Object(r.useRef)(),s=Object(g.f)(),a=Object(o.b)(),u=Object(r.useState)(!1),l=Object(v.a)(u,2),A=l[0],j=l[1],d=Object(r.useState)(!1),b=Object(v.a)(d,2),p=b[0],f=b[1],O=Object(r.useState)(),h=Object(v.a)(O,2),w=h[0],N=h[1],k=Object(r.useState)(null),C=Object(v.a)(k,2),S=C[0],z=C[1];Object(r.useEffect)((function(){return document.title="Sign Up \u2022 Instadicey"}),[]),Object(r.useEffect)((function(){return function(){return clearInterval(w)}}));var I=function(){!function(){var t=e.current.value.trim();return""!==t&&!!t.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)}()||c.current.value.length<6||n.current.value.length>20||0===n.current.value.length||!n.current.value.match(/^[A-Za-z0-9]*$/)?j(!1):j(!0)},U=function(e){return new Promise(function(){var t=Object(x.a)(m.a.mark((function t(n){var r,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(D.c)(E,"users"),c=Object(D.n)(r,Object(D.s)("username","==",e)),t.next=4,Object(D.i)(c);case 4:s=t.sent,console.error(s.docs.length),0!==s.docs.length?(z("Username already taken"),n(!1)):n(!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},L=function(){var r=Object(x.a)(m.a.mark((function r(s){var i,o,u,l,j,d,b,p,O;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s.preventDefault(),A){r.next=3;break}return r.abrupt("return");case 3:return i=e.current.value.toLowerCase(),o=t.current.value,u=n.current.value.toLowerCase(),l=c.current.value,r.prev=7,a({type:"START_LOADING"}),r.next=11,U(u);case 11:if(r.sent){r.next=14;break}return r.abrupt("return",a({type:"STOP_LOADING"}));case 14:return r.next=16,Object(y.a)(P,i,l);case 16:return j=r.sent,d=j.user,b={realName:o,username:u,profilePic:"https://firebasestorage.googleapis.com/v0/b/instadicey.appspot.com/o/default%2FprofilePic.jpg?alt=media&token=3ac835a3-016e-470a-b7b3-f898d82cdbde",defaultProfilePic:!0,bio:"",saved:[],recentSearches:{},uid:P.currentUser.uid,timestamp:Object(D.p)()},p=Object(D.g)(E,"users",P.currentUser.uid),r.next=22,Object(D.q)(p,b);case 22:return z(null),r.next=25,Object(y.c)(d);case 25:f(!0),T(b),a({type:"STOP_LOADING"}),r.next=36;break;case 30:r.prev=30,r.t0=r.catch(7),O=r.t0.code,console.error("Error with signup",r.t0),"auth/email-already-in-use"===O&&z("Email already in use"),a({type:"STOP_LOADING"});case 36:case"end":return r.stop()}}),r,null,[[7,30]])})));return function(e){return r.apply(this,arguments)}}(),T=function(e){N(setInterval(Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.currentUser.reload();case 2:P.currentUser.emailVerified&&(a(R({user:P.currentUser,info:e})),s.push(""));case 4:case"end":return t.stop()}}),t)}))),5e3))};return Object(r.useEffect)((function(){return Object(y.e)(P)}),[]),p?Object(q.jsxs)("div",{id:"email-verification-window",className:"outlined",children:[Object(q.jsx)("div",{className:"icon",children:Object(q.jsx)("img",{src:_,alt:"email verification icon"})}),Object(q.jsx)("p",{className:"header",children:"A verification link has been sent to your email"}),Object(q.jsx)("p",{children:"Please click on the link sent to your email address and come back here to continue."})]}):Object(q.jsxs)("div",{id:"signup-page",children:[Object(q.jsxs)("div",{id:"signup-window",className:"outlined",children:[Object(q.jsx)("div",{className:"logo",children:Object(q.jsx)("img",{src:H,alt:"Instadicey logo"})}),S?Object(q.jsx)(K,{text:S}):Object(q.jsx)("span",{style:{fontWeight:"bold",color:"rgba(50, 50, 50, 0.5)"},children:"Sign up now!"}),Object(q.jsxs)("form",{className:"info",onSubmit:L,children:[Object(q.jsx)("input",{type:"text",placeholder:"Email",id:"email",ref:e,onChange:I}),Object(q.jsx)("input",{type:"text",placeholder:"Full Name",id:"name",ref:t}),Object(q.jsx)("input",{type:"text",placeholder:"Username",id:"username",ref:n,onChange:I}),Object(q.jsx)("input",{type:"password",placeholder:"Password",id:"password",ref:c,onChange:I}),Object(q.jsx)("button",{id:"signup",className:"".concat(A?null:"disabled"),children:"Sign Up"})]})]}),Object(q.jsx)("div",{className:"extra outlined",children:Object(q.jsxs)("span",{children:["Have an account? ",Object(q.jsx)(i.b,{to:"/",className:"button",children:"Log In"})]})})]})},ee=n.p+"static/media/green-checkmark.6fb350c8.png",te=function(){var e=Object(o.c)((function(e){return e.currentUser})),t=Object(r.useRef)(),n=Object(r.useState)(!1),c=Object(v.a)(n,2),s=c[0],a=c[1],u=Object(r.useState)(!1),l=Object(v.a)(u,2),A=l[0],j=l[1],d=Object(r.useState)(null),b=Object(v.a)(d,2),p=b[0],f=b[1];Object(r.useEffect)((function(){return document.title="Reset Password \u2022 Instadicey"}),[]);var O=function(){var e=Object(x.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),s){e.next=3;break}return e.abrupt("return");case 3:return r=t.current.value,e.prev=4,f(null),e.next=8,Object(I.i)(P,r);case 8:j(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),"auth/user-not-found"===e.t0.code&&f("User not found"),console.error("Error with password reset",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return A?Object(q.jsxs)("div",{className:"password-reset-window success outlined",children:[Object(q.jsx)("div",{className:"icon",children:Object(q.jsx)("img",{src:ee,alt:"Success"})}),Object(q.jsx)("h1",{children:"Email sent"}),Object(q.jsx)("p",{children:"Check your inbox and spam and follow the instructions"}),Object(q.jsx)("div",{className:"extra",children:Object(q.jsx)(i.b,{to:"/",children:"Back To Login"})})]}):Object(q.jsxs)("div",{className:"password-reset-window outlined",children:[Object(q.jsx)("div",{className:"icon",children:Object(q.jsx)("img",{src:"data:image/png;base64,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",alt:"locked out"})}),Object(q.jsx)("h1",{children:"Can't Log In?"}),Object(q.jsx)("p",{children:"It's all good, mate. just enter your email and we'll send you an email to reset your password right away!"}),p?Object(q.jsx)(K,{text:p}):null,Object(q.jsxs)("form",{onSubmit:O,children:[Object(q.jsx)("input",{type:"text",id:"email",placeholder:"Email",ref:t,onChange:function(){var e=t.current.value;return""===e?a(!1):e.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)?a(!0):a(!1)}}),Object(q.jsx)("button",{id:"reset",className:"".concat(s?null:"disabled"),children:"Send Email"})]}),!e&&Object(q.jsx)("div",{className:"extra outlined",children:Object(q.jsx)(i.b,{to:"/",children:"Back To Login"})})]})},ne=(n(143),function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(o.b)(),c=Object(r.useState)(!1),s=Object(v.a)(c,2),a=s[0],u=s[1],l=Object(r.useState)(null),A=Object(v.a)(l,2),j=A[0],d=A[1];Object(r.useEffect)((function(){return document.title="Login \u2022 Instadicey"}),[]);var b=function(){!function(){var t=e.current.value;return""!==t&&!!t.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)}()||t.current.value.length<6?u(!1):u(!0)},p=function(){var r=Object(x.a)(m.a.mark((function r(c){var s,i,o,u,l,A;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),a){r.next=3;break}return r.abrupt("return");case 3:return s=e.current.value,i=t.current.value,r.prev=5,n({type:"START_LOADING"}),r.next=9,Object(y.d)(P,s,i).then((function(e){return e.user}));case 9:if((o=r.sent).emailVerified){r.next=15;break}return Object(y.e)(P),u=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.c)(o);case 2:d("Email sent");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d(Object(q.jsxs)("div",{children:["Email not verified",Object(q.jsx)("br",{}),Object(q.jsx)("span",{className:"link",onClick:u,children:"click here"})," to send verification email"]})),r.abrupt("return",n({type:"STOP_LOADING"}));case 15:return r.next=17,Object(D.h)(Object(D.g)(E,"users",o.uid)).then((function(e){return e.data()}));case 17:l=r.sent,n(R({user:o,info:l})),n({type:"STOP_LOADING"}),r.next=28;break;case 22:r.prev=22,r.t0=r.catch(5),A=r.t0.code,console.error("Error with login",r.t0),"auth/wrong-password"===A||"auth/user-not-found"===A?d("Wrong email or password"):"auth/too-many-requests"===A&&d("Please try again later"),n({type:"STOP_LOADING"});case 28:case"end":return r.stop()}}),r,null,[[5,22]])})));return function(e){return r.apply(this,arguments)}}();return Object(q.jsxs)("div",{id:"login-page",children:[Object(q.jsxs)("div",{id:"login-window",className:"outlined",children:[Object(q.jsx)("div",{className:"logo",children:Object(q.jsx)("img",{src:H,alt:"Instadicey logo"})}),j?Object(q.jsx)(K,{text:j}):null,Object(q.jsxs)("form",{className:"info",onSubmit:p,children:[Object(q.jsx)("input",{type:"text",placeholder:"Email",id:"email",ref:e,onChange:b}),Object(q.jsx)("input",{type:"password",placeholder:"Password",id:"password",ref:t,onChange:b}),Object(q.jsx)("button",{id:"login",className:"".concat(a?null:"disabled"),children:"Log In"})]}),Object(q.jsx)(i.b,{to:"accounts/password-reset",children:"Forgot password?"})]}),Object(q.jsx)("div",{className:"extra outlined",children:Object(q.jsxs)("span",{children:["Don't have an account? ",Object(q.jsx)(i.b,{to:"/accounts/email-signup",className:"button",children:"Sign Up"})]})})]})}),re=n.p+"static/media/red-x.1684dcf4.png",ce=function(){var e=Object(o.b)(),t=Object(r.useState)(""),n=Object(v.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)(""),i=Object(v.a)(a,2),u=i[0],l=i[1],A=Object(r.useState)({}),j=Object(v.a)(A,2),d=j[0],b=j[1],p=Object(r.useRef)(),f=Object(r.useRef)(),O=Object(r.useState)(!1),h=Object(v.a)(O,2),g=h[0],w=h[1],N=Object(r.useState)(""),k=Object(v.a)(N,2),y=k[0],C=k[1],S=Object(r.useState)(!1),E=Object(v.a)(S,2),z=E[0],D=E[1];Object(r.useEffect)((function(){return document.title="Verification \u2022 Instadicey"}),[]);var U=function(){var t=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(I.b)(P,u);case 3:b({type:"email-verification",ok:!0}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),b({type:"email-verification",ok:!1});case 10:e({type:"STOP_LOADING"});case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),L=function(){return T()&&R()?D(!0):D(!1)},T=function(){return!(p.current.value.length<6)},R=function(){return f.current.value===p.current.value},B=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),z){e.next=3;break}return e.abrupt("return");case 3:return n=p.current.value,e.prev=4,e.next=7,Object(I.c)(P,u,n);case 7:w(!0),b({type:"password-reset",ok:!0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("error with confirming password",e.t0),b({type:"password-reset",ok:!1});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var t=Object(x.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(I.n)(P,u);case 3:n=t.sent,C(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Invalid code",t.t0),b({type:"password-reset",ok:!1});case 11:e({type:"STOP_LOADING"});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){e({type:"START_LOADING"}),s(Q("mode")),l(Q("oobCode")),function(){switch(c){case"verifyEmail":U();break;case"resetPassword":M()}}()}),[c]);var Q=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))};return"resetPassword"!==c||g||!1===d.ok?d.ok?Object(q.jsxs)("div",{className:"verification-window success outlined",children:[Object(q.jsx)("div",{className:"icon",children:Object(q.jsx)("img",{src:ee,alt:"success"})}),"email-verification"===d.type?Object(q.jsxs)("div",{className:"text-div",children:[Object(q.jsx)("h1",{children:"Your email address has been verified"}),Object(q.jsx)("p",{children:"Please go back to the sign up page to continue."})]}):"password-reset"===d.type?Object(q.jsxs)("div",{className:"text-div",children:[Object(q.jsx)("h1",{children:"Your password has been reset"}),Object(q.jsx)("p",{children:"You can now log in with the new password."})]}):null]}):!1===d.ok?Object(q.jsxs)("div",{className:"verification-window failed outlined",children:[Object(q.jsx)("div",{className:"icon",children:Object(q.jsx)("img",{src:re,alt:"failed"})}),"email-verification"===d.type?Object(q.jsxs)("div",{className:"text-div",children:[Object(q.jsx)("h1",{children:"An error has occured"}),Object(q.jsx)("p",{children:"This email address is already verified or the link might have expired."})]}):"password-reset"===d.type?Object(q.jsxs)("div",{className:"text-div",children:[Object(q.jsx)("h1",{children:"An error has occured"}),Object(q.jsx)("p",{children:"Please try to reset the password again."})]}):null]}):null:Object(q.jsxs)("div",{className:"verification-window outlined password-reset",children:[Object(q.jsx)("div",{className:"icon",children:Object(q.jsx)("img",{src:X,alt:"logo"})}),Object(q.jsxs)("div",{className:"email-div",children:[Object(q.jsx)("h2",{children:"Your Email:"}),Object(q.jsx)("span",{children:y})]}),Object(q.jsxs)("form",{onSubmit:B,children:[Object(q.jsx)("input",{type:"password",id:"password",placeholder:"Password (at least 6 characters)",ref:p,onChange:L}),Object(q.jsx)("input",{type:"password",id:"confirm password",placeholder:"Confirm Password",ref:f,onChange:L}),Object(q.jsx)("button",{className:"".concat(z?null:"disabled"),children:"Reset Password"})]})]})},se=function(){var e=Object(o.c)((function(e){return e.currentUser})),t=Object(o.b)(),n=Object(r.useState)(null),c=Object(v.a)(n,2),s=c[0],a=c[1],u=Object(r.useState)(null),l=Object(v.a)(u,2),A=l[0],j=l[1],d=Object(r.useRef)(),b=Object(r.useRef)(),p=Object(r.useRef)(),f=function(){return d.current.value.length>0&&b.current.value.length>0&&p.current.value.length>0?a(!0):a(!1)},O=function(){var n=Object(x.a)(m.a.mark((function n(r){var c,a,i,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),s){n.next=3;break}return n.abrupt("return");case 3:if(n.prev=3,j(!0),c=d.current.value,a=b.current.value,i=p.current.value,a===i){n.next=10;break}throw new Error("Password don't match");case 10:if(!(a.length<6)){n.next=12;break}throw new Error("Password too short");case 12:return n.prev=12,o=I.a.credential(e.user.email,c),n.next=16,Object(I.g)(P.currentUser,o);case 16:return n.next=18,Object(I.m)(P.currentUser,a);case 18:t(B("Password updated successfully.","success")),window.location.reload(!1),n.next=25;break;case 22:throw n.prev=22,n.t0=n.catch(12),new Error(n.t0.code);case 25:j(!1),n.next=39;break;case 28:if(n.prev=28,n.t1=n.catch(3),j(!1),console.error(n.t1.message),"Password don't match"!==n.t1.message){n.next=34;break}return n.abrupt("return",t(B("Please make sure both password match.","error")));case 34:if("Password too short"!==n.t1.message){n.next=36;break}return n.abrupt("return",t(B("Password is too short. minimum is 6 characters.","error")));case 36:if("auth/wrong-password"!==n.t1.message){n.next=38;break}return n.abrupt("return",t(B("Your old password is not correct.","error")));case 38:t(B("Oops, please try again later.","error"));case 39:case"end":return n.stop()}}),n,null,[[3,28],[12,22]])})));return function(e){return n.apply(this,arguments)}}();return e?Object(q.jsxs)("div",{className:"account-element change-password",children:[Object(q.jsxs)("div",{className:"element profile-pic-container",children:[Object(q.jsx)("div",{className:"img-container outlined left",children:Object(q.jsx)("img",{src:e.info.profilePic,alt:"".concat(e.info.username,"'s profile pic'")})}),Object(q.jsx)("div",{className:"right",children:e.info.username})]}),Object(q.jsxs)("form",{onSubmit:O,children:[Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("div",{className:"left",children:Object(q.jsx)("label",{htmlFor:"old-password",children:"Old Password"})}),Object(q.jsx)("div",{className:"right",children:Object(q.jsx)("input",{type:"password",id:"old-password",className:"outlined",ref:d,onChange:f})})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("div",{className:"left",children:Object(q.jsx)("label",{htmlFor:"new-password",children:"New Password"})}),Object(q.jsx)("div",{className:"right",children:Object(q.jsx)("input",{type:"password",id:"new-password",className:"outlined",ref:b,onChange:f})})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("div",{className:"left",children:Object(q.jsx)("label",{htmlFor:"confirm-password",children:"Confirm New Password"})}),Object(q.jsx)("div",{className:"right",children:Object(q.jsx)("input",{type:"password",id:"confirm-password",className:"outlined",ref:p,onChange:f})})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("div",{className:"left"}),A?Object(q.jsx)("button",{className:"loading",children:Object(q.jsx)("div",{children:Object(q.jsx)("img",{src:W,alt:"loading"})})}):Object(q.jsx)("button",{className:"submit ".concat(s?null:"disabled"),children:"Change Password"})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("div",{className:"left"}),Object(q.jsx)(i.b,{to:"/accounts/password/reset",className:"forgot-password",children:"Forgot Password?"})]})]})]}):Object(q.jsx)(Y,{})},ae=n(45),ie=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.currentUser})),n=Object(r.useState)(!1),c=Object(v.a)(n,2),s=c[0],a=c[1],i=Object(r.useState)(!1),u=Object(v.a)(i,2),l=u[0],A=u[1],j=Object(r.useState)(!1),d=Object(v.a)(j,2),b=d[0],p=d[1],f=Object(r.useState)(!1),O=Object(v.a)(f,2),h=O[0],g=O[1],w=Object(r.useRef)(),N=Object(r.useRef)(),k=Object(r.useRef)(),y=Object(r.useRef)(),C=Object(r.useRef)(),S=Object(r.useRef)(),U=function(){return t.info.defaultProfilePic?M():g(!0)},L=function(){return g(!1)},T=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(),p(!0),e.next=4,Object(D.r)(Object(D.g)(E,"users",t.user.uid),{profilePic:"https://firebasestorage.googleapis.com/v0/b/instadicey.appspot.com/o/default%2FprofilePic.jpg?alt=media&token=3ac835a3-016e-470a-b7b3-f898d82cdbde",defaultProfilePic:!0});case 4:return e.next=6,V();case 6:p(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){return w.current.click()},Q=function(){var n=Object(x.a)(m.a.mark((function n(r){var c,s,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=r.target.files[0]){n.next=4;break}throw new Error("No photo uploaded");case 4:if(w.current.accept.split(", ").includes(c.type)){n.next=7;break}throw new Error("Not a supported photo format");case 7:return L(),p(!0),s=Object(ae.c)(z,"users/".concat(t.user.uid,"/profilePic")),n.next=12,Object(ae.d)(s,c);case 12:return n.next=14,Object(ae.a)(s);case 14:return a=n.sent,n.next=17,Object(D.r)(Object(D.g)(E,"users",t.user.uid),{profilePic:a,defaultProfilePic:!1});case 17:return n.next=19,V();case 19:w.current.value="",p(!1),e(B("Photo updated successfully","success")),n.next=32;break;case 24:if(n.prev=24,n.t0=n.catch(0),console.error(n.t0),"No photo uploaded"!==n.t0.message){n.next=29;break}return n.abrupt("return",null);case 29:if("Not a supported photo format"!==n.t0.message){n.next=31;break}return n.abrupt("return",e(B("Not a supported photo format.","error")));case 31:e(B("Oops, please try again later.","error"));case 32:case"end":return n.stop()}}),n,null,[[0,24]])})));return function(e){return n.apply(this,arguments)}}(),G=function(){return s?null:a(!0)},F=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>20)){e.next=2;break}throw new Error("Username too long");case 2:if(""!==t.trim()){e.next=4;break}throw new Error("Username not entered");case 4:if(t.match(/^[A-Za-z0-9]*$/)){e.next=6;break}throw new Error("Username not English");case 6:return n=Object(D.c)(E,"users"),r=Object(D.n)(n,Object(D.s)("username","==",t)),e.next=10,Object(D.i)(r);case 10:if(0===e.sent.docs.length){e.next=13;break}throw new Error("Username already taken");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>150)){e.next=2;break}throw new Error("Bio too long");case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(x.a)(m.a.mark((function e(n,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.trim()){e.next=2;break}throw new Error("Email can't be empty");case 2:if(n.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)){e.next=4;break}throw new Error("Email is invalid");case 4:if(""!==r.trim()){e.next=6;break}throw new Error("Password can't be empty");case 6:return c=I.a.credential(t.user.email,r),e.prev=7,e.next=10,Object(I.g)(P.currentUser,c);case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(7),new Error(e.t0.code);case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var n=Object(x.a)(m.a.mark((function n(r){var c,a,i,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),s){n.next=3;break}return n.abrupt("return");case 3:if(A(!0),n.prev=4,c=t.info.realName,a=t.info.username,i=t.info.bio,o=t.user.email,c===N.current.value){n.next=13;break}return n.next=12,F(N.current.value);case 12:c=n.sent;case 13:if(a===k.current.value){n.next=17;break}return n.next=16,Z(k.current.value);case 16:a=n.sent;case 17:if(i===y.current.value){n.next=21;break}return n.next=20,H(y.current.value);case 20:i=n.sent;case 21:if(o===C.current.value){n.next=25;break}return n.next=24,X(C.current.value,S.current.value);case 24:o=n.sent;case 25:return n.next=27,Object(D.r)(Object(D.g)(E,"users",t.user.uid),{realName:c,username:a,bio:i});case 27:if(t.user.email===o){n.next=38;break}return n.prev=28,n.next=31,Object(I.l)(P.currentUser,o);case 31:return n.next=33,Object(I.h)(P.currentUser);case 33:n.next=38;break;case 35:throw n.prev=35,n.t0=n.catch(28),new Error(n.t0.code);case 38:e(B("Info updated.","success")),window.location.reload(!1),n.next=67;break;case 42:if(n.prev=42,n.t1=n.catch(4),console.error(n.t1.message),A(!1),"Username not entered"!==n.t1.message){n.next=48;break}return n.abrupt("return",e(B("Username can't be empty.","error")));case 48:if("Username too long"!==n.t1.message){n.next=50;break}return n.abrupt("return",e(B("Username too long. max is 20 characters.","error")));case 50:if("Username not English"!==n.t1.message){n.next=52;break}return n.abrupt("return",e(B("English letters only.","error")));case 52:if("Username already taken"!==n.t1.message){n.next=54;break}return n.abrupt("return",e(B("Username already taken.","error")));case 54:if("Bio too long"!==n.t1.message){n.next=56;break}return n.abrupt("return",e(B("Bio is too long. max is 150 characters.","error")));case 56:if("Email can't be empty"!==n.t1.message){n.next=58;break}return n.abrupt("return",e(B("Email can't be empty.","error")));case 58:if("Email is invalid"!==n.t1.message){n.next=60;break}return n.abrupt("return",e(B("Email is invalid.","error")));case 60:if("Password can't be empty"!==n.t1.message){n.next=62;break}return n.abrupt("return",e(B("Please confirm your password.","error")));case 62:if("auth/email-already-in-use"!==n.t1.message){n.next=64;break}return n.abrupt("return",e(B("Email already in use.")));case 64:if("auth/wrong-password"!==n.t1.message){n.next=66;break}return n.abrupt("return",e(B("Wrong password.","error")));case 66:e(B("Oops, please try again later.","error"));case 67:A(!1);case 68:case"end":return n.stop()}}),n,null,[[4,42],[28,35]])})));return function(e){return n.apply(this,arguments)}}(),V=function(){var n=Object(x.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(D.h)(Object(D.g)(E,"users",t.user.uid)).then((function(e){return e.data()}));case 2:r=n.sent,e(R({user:P.currentUser,info:r}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return t?Object(q.jsxs)("div",{className:"account-element edit-profile",children:[h&&Object(q.jsx)("div",{className:"dialog-box-container",onClick:L,children:Object(q.jsxs)("div",{className:"dialog-box",onClick:function(e){return e.stopPropagation()},children:[Object(q.jsx)("h2",{children:"Change Profile Photo"}),Object(q.jsx)("button",{className:"upload text",onClick:M,children:"Upload Photo"}),Object(q.jsx)("button",{className:"remove text",onClick:T,children:"Remove Current Photo"}),Object(q.jsx)("button",{className:"cancel text",onClick:L,children:"Cancel"})]})}),Object(q.jsxs)("div",{className:"element profile-pic-container",children:[Object(q.jsxs)("div",{className:"img-container outlined left",onClick:U,children:[b&&Object(q.jsx)("div",{className:"loading",children:Object(q.jsx)("img",{src:W,alt:"loading"})}),Object(q.jsx)("img",{src:t.info.profilePic,alt:"".concat(t.info.username,"'s profile pic'")}),Object(q.jsx)("input",{id:"photo",type:"file",accept:"image/png, image/jpg, image/jpeg, image/pjpeg, image/jfif, image/pjp",style:{display:"none"},ref:w,onChange:Q})]}),Object(q.jsxs)("div",{className:"right",children:[t.info.username,Object(q.jsx)("button",{className:"text",onClick:U,children:"Change Profile Photo"})]})]}),Object(q.jsxs)("form",{onSubmit:J,children:[Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("label",{htmlFor:"name",className:"left",children:"Name"}),Object(q.jsxs)("div",{className:"right",children:[Object(q.jsx)("input",{type:"text",id:"name",defaultValue:t.info.realName,placeholder:"Name",ref:N,className:"outlined",onChange:G}),Object(q.jsx)("p",{children:"Help people discover your account by using the name you're known by: either your full name, nickname, or business name."})]})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("label",{htmlFor:"username",className:"left",children:"Username"}),Object(q.jsx)("div",{className:"right",children:Object(q.jsx)("input",{type:"text",id:"username",defaultValue:t.info.username,placeholder:"Username",ref:k,className:"outlined",onChange:G})})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("label",{htmlFor:"bio",className:"left",children:"Bio"}),Object(q.jsx)("div",{className:"right",children:Object(q.jsx)("textarea",{id:"bio",defaultValue:t.info.bio,ref:y,className:"outlined",onChange:G})})]}),Object(q.jsxs)("div",{className:"element info",children:[Object(q.jsx)("span",{className:"left"}),Object(q.jsxs)("div",{className:"right",children:[Object(q.jsx)("p",{className:"header",children:"Personal Information"}),Object(q.jsx)("p",{children:"Provide your personal information, even if the account is used for a business, a pet or something else. This won't be a part of your public profile."})]})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("label",{htmlFor:"email",className:"left",children:"Email"}),Object(q.jsxs)("div",{className:"right",children:[Object(q.jsx)("input",{type:"text",id:"email",defaultValue:t.user.email,placeholder:"Email",ref:C,className:"outlined",onChange:G}),C.current&&t.user.email!==C.current.value?Object(q.jsx)("input",{type:"password",id:"password",placeholder:"Confirm Password",ref:S,className:"outlined"}):null]})]}),Object(q.jsxs)("div",{className:"element",children:[Object(q.jsx)("div",{className:"left"}),l?Object(q.jsx)("button",{className:"loading",children:Object(q.jsx)("div",{children:Object(q.jsx)("img",{src:W,alt:"loading"})})}):Object(q.jsx)("button",{className:"submit ".concat(s?null:"disabled"),children:"Submit"})]})]})]}):Object(q.jsx)(Y,{})},oe=(n(144),function(){var e=Object(g.f)(),t=Object(F.useMediaQuery)({query:"(max-width: 600px)"});return Object(r.useEffect)((function(){"/accounts/edit"===e.location.pathname?document.title="Edit Profile \u2022 Instadicey":"/accounts/password/change"===e.location.pathname&&(document.title="Change Password \u2022 Instadicey")}),[e.location.pathname]),Object(q.jsxs)("div",{className:"account-edit outlined",children:[!t&&Object(q.jsxs)("ul",{className:"sidebar",children:[Object(q.jsx)("li",{children:Object(q.jsx)(i.c,{exact:!0,to:"/accounts/edit",activeClassName:"selected",children:"Edit Profile"})}),Object(q.jsx)("li",{children:Object(q.jsx)(i.c,{to:"/accounts/password/change",activeClassName:"selected",children:"Change Password"})})]}),Object(q.jsx)("div",{className:"main",children:Object(q.jsxs)(g.c,{children:[Object(q.jsx)(g.a,{exact:!0,path:"/accounts/edit",component:ie}),Object(q.jsx)(g.a,{exact:!0,path:"/accounts/password/change",component:se})]})})]})}),ue=n(62),le=n(177),Ae=n(171),je=n(172),de=n(179),be=n(21),pe=function(e){var t=e.target,n=Object(o.b)(),c=Object(o.c)((function(e){return e.currentUser})),s=Object(r.useState)(null),a=Object(v.a)(s,2),i=a[0],u=a[1],l=Object(r.useState)(!1),A=Object(v.a)(l,2),j=A[0],d=A[1];Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return u(!0),e.next=5,Object(D.h)(Object(D.g)(E,"users",c.user.uid,"user_follows","following")).then((function(e){return e.data()})).then((function(e){return e?e.following:[]}));case 5:e.sent.includes(t.uid)?d(!0):d(!1),u(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,t]);var b=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",alert("sign in"));case 2:return window.onbeforeunload=function(){return""},u(!0),e.next=6,f();case 6:return e.next=8,h();case 8:d(!0),u(!1),window.onbeforeunload=null;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.onbeforeunload=function(){return""},u(!0),e.next=4,O();case 4:return e.next=6,g();case 6:d(!1),u(!1),window.onbeforeunload=null;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(m.a.mark((function e(){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(D.g)(E,"users",c.user.uid,"user_follows","following"),e.prev=1,e.next=4,Object(D.o)(E,function(){var e=Object(x.a)(m.a.mark((function e(n){var c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get(r);case 2:if((c=e.sent).exists()){e.next=5;break}throw new Error("Document does not exist");case 5:s=[].concat(Object(be.a)(c.data().following),[t.uid]),n.update(r,{following:s},{merge:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=15;break;case 6:if(e.prev=6,e.t0=e.catch(1),console.error(e.t0),"Document does not exist"!==e.t0.message){e.next=14;break}return e.next=12,Object(D.q)(r,{following:[t.uid]},{merge:!0});case 12:e.next=15;break;case 14:n(B("Oops, try again later.","error"));case 15:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(x.a)(m.a.mark((function e(){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(D.g)(E,"users",c.info.uid,"user_follows","following"),e.prev=1,e.next=4,Object(D.o)(E,function(){var e=Object(x.a)(m.a.mark((function e(n){var c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get(r);case 2:if((c=e.sent).exists()){e.next=5;break}throw new Error("Document does not exist");case 5:if(c.data().following.includes(t.uid)){e.next=7;break}throw new Error("User already not followed");case 7:s=c.data().following.filter((function(e){return e!==t.uid})),n.update(r,{following:s},{merge:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),n(B("Oops, try again later.","error"));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(x.a)(m.a.mark((function e(){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(D.g)(E,"users",t.uid,"user_follows","followers"),e.prev=1,e.next=4,Object(D.o)(E,function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(r);case 2:if((n=e.sent).exists()){e.next=5;break}throw new Error("Document does not exist");case 5:if(!n.data().followers.includes(c.user.uid)){e.next=7;break}throw new Error("User already followed");case 7:s=[].concat(Object(be.a)(n.data().followers),[c.user.uid]),t.update(r,{followers:s},{merge:!0});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=15;break;case 6:if(e.prev=6,e.t0=e.catch(1),console.error(e.t0),"Document does not exist"!==e.t0.message){e.next=14;break}return e.next=12,Object(D.q)(r,{followers:[c.user.uid]},{merge:!0});case 12:e.next=15;break;case 14:n(B("Oops, try again later.","error"));case 15:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(m.a.mark((function e(){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(D.g)(E,"users",t.uid,"user_follows","followers"),e.prev=1,e.next=4,Object(D.o)(E,function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(r);case 2:if((n=e.sent).exists()){e.next=5;break}throw new Error("Document does not exist");case 5:s=n.data().followers.filter((function(e){return e!==c.user.uid})),t.update(r,{followers:s},{merge:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),n(B("Oops, try again later.","error"));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return i?Object(q.jsx)("button",{className:"follow-btn loading",children:Object(q.jsx)("div",{children:Object(q.jsx)("img",{src:W,alt:"loading"})})}):j?Object(q.jsx)("button",{className:"follow-btn unfollow",onClick:p,children:"Unfollow"}):Object(q.jsx)("button",{className:"follow-btn follow",onClick:b,children:"Follow"})},fe=function(e){var t=e.size,n=void 0===t?24:t,r=e.user,c=e.marginLeft,s=void 0===c?10:c,a=e.marginRight,i=void 0===a?0:a;return r.verified?Object(q.jsx)("span",{className:"verified",style:{marginLeft:s,marginRight:i},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.959 17l-4.5-4.319 1.395-1.435 3.08 2.937 7.021-7.183 1.422 1.409-8.418 8.591z"})})}):null},Oe=function(e){var t=e.title,n=e.uids,c=e.closeFollowListWindow,s=e.newMessage,a=Object(o.c)((function(e){return e.currentUser})),u=Object(r.useState)(null),l=Object(v.a)(u,2),A=l[0],j=l[1],d=Object(r.useState)(!0),b=Object(v.a)(d,2),p=b[0],f=b[1],O=function(e){return e.split("").map((function(e){return Number.isInteger(parseInt(e))?e:"".concat(Math.abs(e.charCodeAt(0)-97))})).join("").slice(0,25)},h=function(e){var t=O(a.user.uid),n=O(e);return t>n?"".concat(t).concat(n):"".concat(n).concat(t)},g=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.next=3,Object(D.q)(Object(D.g)(E,"chats",n),{id:n,members:[t,a.user.uid]},{merge:!0});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map((function(e){return Object(D.h)(Object(D.g)(E,"users",e)).then((function(e){return e.data()}))})));case 2:t=e.sent,j(t),f(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(q.jsx)("div",{className:"backdrop container",onClick:c,children:Object(q.jsxs)("div",{className:"follow-list-window",onClick:function(e){return e.stopPropagation()},children:[Object(q.jsxs)("div",{className:"header",children:[Object(q.jsx)("h1",{children:t}),Object(q.jsx)("span",{className:"close",onClick:c,children:"X"})]}),p?Object(q.jsx)("ul",{className:"loading",children:[0,1,2,3,4,5,6,7,8].map((function(e){return Object(q.jsx)("li",{className:"person",children:Object(q.jsxs)("div",{className:"profile",children:[Object(q.jsx)("div",{className:"profile-pic"}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("span",{className:"real-name"}),Object(q.jsx)("span",{className:"username"})]})]})},e)}))}):Object(q.jsx)("ul",{children:s?A.map((function(e){return Object(q.jsx)(i.b,{to:"/direct/t/".concat(h(e.uid)),className:"person",onClick:function(){return g(e.uid,h(e.uid))},children:Object(q.jsxs)("div",{className:"profile",children:[Object(q.jsx)("div",{className:"profile-pic",children:Object(q.jsx)("img",{src:e.profilePic,alt:"".concat(e.username,"'s Pic")})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("div",{style:{display:"flex"},children:Object(q.jsx)("span",{className:"username",children:e.username})}),Object(q.jsx)("span",{className:"real-name",children:e.realName})]})]})},e.uid)})):A.map((function(e){return Object(q.jsxs)("li",{className:"person",children:[Object(q.jsxs)("div",{className:"profile",children:[Object(q.jsx)(i.b,{to:"".concat(e.username),children:Object(q.jsx)("div",{className:"profile-pic",children:Object(q.jsx)("img",{src:e.profilePic,alt:"".concat(e.username,"'s Pic")})})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)(i.b,{to:"/".concat(e.username),className:"username",children:e.username})," ",Object(q.jsx)(fe,{user:e,size:15,marginLeft:7.5})]}),Object(q.jsx)("span",{className:"real-name",children:e.realName})]})]}),a&&a.user.uid===e.uid?null:Object(q.jsx)(pe,{target:e,startLoading:function(){return f(!0)},stopLoading:function(){return f(!1)}})]},e.uid)}))})]})})},he=function(e){var t=e.size,n=void 0===t?25:t,c=e.target,s=e.postPath,a=e.isComment,i=Object(o.b)(),u=Object(o.c)((function(e){return e.currentUser})),l=Object(r.useState)(!1),A=Object(v.a)(l,2),j=A[0],d=A[1];Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:c.likes.includes(u.user.uid)?d(!0):d(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u,c]);var b=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",alert("sign in"));case 2:if(e.prev=2,!a){e.next=8;break}return e.next=6,Object(D.r)(Object(D.g)(E,s,"comments","".concat(c.id)),{likes:Object(D.b)(u.user.uid)});case 6:e.next=10;break;case 8:return e.next=10,Object(D.r)(Object(D.g)(E,s),{likes:Object(D.b)(u.user.uid)});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),i(B("Oops, try again later.","error"));case 16:d(!0);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,Object(D.r)(Object(D.g)(E,s,"comments","".concat(c.id)),{likes:Object(D.a)(u.user.uid)});case 4:e.next=8;break;case 6:return e.next=8,Object(D.r)(Object(D.g)(E,s),{likes:Object(D.a)(u.user.uid)});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),i(B("Oops, try again later.","error"));case 14:d(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return j?Object(q.jsx)("button",{className:"like liked icon",onClick:p,children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z"})})}):Object(q.jsx)("button",{className:"like icon",onClick:b,children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.571 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181"})})})},me=function(e){var t=e.commentData,n=e.postPath,c=e.noPhoto,s=e.noTimestamp,a=e.noLike,u=e.noLikesCounter,l=e.noRemove,A=(e.isCaption,e.setLikesWindow),j=e.refreshComments,d=Object(o.c)((function(e){return e.currentUser})),b=Object(r.useState)(null),p=Object(v.a)(b,2),f=p[0],O=p[1],h=Object(r.useState)(!1),g=Object(v.a)(h,2),w=g[0],N=g[1],k=function(){var e=Object(x.a)(m.a.mark((function e(){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,e.next=3,Object(D.h)(Object(D.g)(E,"users",n)).then((function(e){return e.data()}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d.user.uid===t.user){e.next=3;break}throw new Error("Fuck off");case 3:return N(!0),e.next=6,Object(D.e)(Object(D.g)(E,"".concat(n,"/comments/").concat(t.id)));case 6:return e.next=8,j();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),N(!1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),f&&d?Object(q.jsxs)("div",{className:"comment ".concat(w?"disabled":null),style:a?null:{paddingRight:"25px"},children:[c||Object(q.jsx)(i.b,{to:"/".concat(f.username),children:Object(q.jsx)("div",{className:"profile-pic",children:Object(q.jsx)("img",{src:f.profilePic,alt:"".concat(f.username,"'s profile pic")})})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsxs)("div",{style:{display:"inline-block"},children:[Object(q.jsx)(i.b,{to:"/".concat(f.username),className:"username",children:f.username}),Object(q.jsx)(fe,{size:12.5,user:f,marginLeft:0,marginRight:7.5}),Object(q.jsx)("span",{className:"text",children:t.comment})]}),Object(q.jsxs)("div",{children:[s||Object(q.jsx)("span",{className:"timestamp",title:Object(le.a)(Object(Ae.a)(t.timestamp.seconds),"d MMM, yyyy"),children:Object(de.a)(Object(Ae.a)(t.timestamp.seconds))}),u||0===t.likes.length||Object(q.jsxs)("span",{className:"likes",onClick:function(){return A(t.likes)},children:[t.likes.length," likes"]}),t.user===d.user.uid&&!l&&Object(q.jsx)("button",{className:"icon",style:{width:15,height:15},onClick:y,children:Object(q.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M9 3h6v-1.75c0-.066-.026-.13-.073-.177-.047-.047-.111-.073-.177-.073h-5.5c-.066 0-.13.026-.177.073-.047.047-.073.111-.073.177v1.75zm11 1h-16v18c0 .552.448 1 1 1h14c.552 0 1-.448 1-1v-18zm-10 3.5c0-.276-.224-.5-.5-.5s-.5.224-.5.5v12c0 .276.224.5.5.5s.5-.224.5-.5v-12zm5 0c0-.276-.224-.5-.5-.5s-.5.224-.5.5v12c0 .276.224.5.5.5s.5-.224.5-.5v-12zm8-4.5v1h-2v18c0 1.105-.895 2-2 2h-14c-1.105 0-2-.895-2-2v-18h-2v-1h7v-2c0-.552.448-1 1-1h6c.552 0 1 .448 1 1v2h7z"})})})]})]}),a||Object(q.jsx)(he,{size:15,target:t,postPath:n,isComment:!0})]}):null},xe=function(e){var t=e.size,n=void 0===t?25:t,c=e.target,s=Object(o.b)(),a=Object(o.c)((function(e){return e.currentUser})),i=Object(r.useState)(!1),u=Object(v.a)(i,2),l=u[0],A=u[1];Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(D.h)(Object(D.g)(E,"users",a.user.uid)).then((function(e){return e.data().saved}));case 4:e.sent.includes(c.id)?A(!0):A(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,c]);var j=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("User not signed in");case 3:return e.next=5,Object(D.r)(Object(D.g)(E,"users",a.user.uid),{saved:Object(D.b)(c.id)});case 5:A(!0),e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(0),console.error(e.t0),"User not signed in"!==e.t0.message){e.next=15;break}return e.abrupt("return",s(B("Please sign in first!","error")));case 15:s(B("Oops, try again later.","error"));case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(D.r)(Object(D.g)(E,"users",a.user.uid),{saved:Object(D.a)(c.id)});case 3:A(!1),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),s(B("Oops, try again later.","error"));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return l?Object(q.jsx)("button",{className:"save saved icon",onClick:d,children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M18 24l-6-5.269-6 5.269v-24h12v24z"})})}):Object(q.jsx)("button",{className:"save icon",onClick:j,children:Object(q.jsx)("svg",{width:n,height:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M5 0v24l7-6 7 6v-24h-14zm1 1h12v20.827l-6-5.144-6 5.144v-20.827z"})})})},ve=function(e){var t=e.postID,n=e.isVertical,c=Object(g.f)(),s=Object(g.g)(),a=Object(r.useRef)(),u=Object(o.b)(),l=Object(o.c)((function(e){return e.currentUser})),A=Object(r.useState)(null),j=Object(v.a)(A,2),d=j[0],b=j[1],p=Object(r.useState)(""),f=Object(v.a)(p,2),O=f[0],h=f[1],w=Object(r.useState)(null),N=Object(v.a)(w,2),k=N[0],y=N[1],C=Object(r.useState)(null),S=Object(v.a)(C,2),P=S[0],z=S[1],I=Object(r.useState)(!1),U=Object(v.a)(I,2),L=U[0],T=U[1],R=Object(r.useState)(!1),M=Object(v.a)(R,2),Q=M[0],G=M[1],F=Object(r.useState)(!1),Z=Object(v.a)(F,2),H=Z[0],X=Z[1],W=function(){return X(!1)},J=Object(r.useState)(null),V=Object(v.a)(J,2),Y=V[0],K=V[1],_=Object(r.useState)(!1),$=Object(v.a)(_,2),ee=$[0],te=$[1];Object(r.useEffect)((function(){return function(){return W()}}),[]);var ne=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.h)(Object(D.g)(E,"users",t)).then((function(e){return e.data()}));case 2:n=e.sent,b(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(x.a)(m.a.mark((function e(){var t,n,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:O,e.next=3,Object(D.i)(Object(D.c)(E,"".concat(t,"/comments"))).then((function(e){return e.docs.map((function(e){return e.data()}))}));case 3:n=e.sent,z(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),L){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,G(!0),n=a.current.value,r=Object(ue.a)(32),!(n.trim().length<1)){e.next=9;break}throw new Error("Comment is empty");case 9:if(!(n.length>2200)){e.next=11;break}throw new Error("Comment too long");case 11:return e.next=13,Object(D.q)(Object(D.g)(E,"".concat(O,"/comments/").concat(r)),{comment:n,likes:[],user:l.user.uid,id:r,timestamp:Object(D.p)()});case 13:return e.next=15,re(O);case 15:G(!1),a.current.value="",e.next=31;break;case 19:if(e.prev=19,e.t0=e.catch(3),console.error(e.t0),"Comment is empty"!==e.t0.message){e.next=26;break}return e.abrupt("return",u(B("Please enter a password.","error")));case 26:if("Comment too long"!==e.t0.message){e.next=30;break}return e.abrupt("return",u(B("Comment too long. max is 2200 characters.","error")));case 30:u(B("Oops, try again later.","error"));case 31:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t){return e.apply(this,arguments)}}(),se=function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),ce(e))},ae=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l.user.uid===k.user){e.next=3;break}throw new Error("Fuck off");case 3:return te(!0),e.next=6,Object(D.e)(Object(D.g)(E,O));case 6:c.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),te(!1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.i)(Object(D.n)(Object(D.d)(E,"user_posts"),Object(D.s)("id","==","".concat(t)))).then((function(e){return e.docs[0]}));case 2:return n=e.sent,y(n.data()),e.next=6,ne(n.data().user);case 6:return r=n.ref.path,h(r),e.next=10,re(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l&&k&&P?n?Object(q.jsxs)("div",{className:"post-window outlined vertical",children:[Y?Object(q.jsx)(Oe,{title:"Likes",uids:Y,closeFollowListWindow:function(){return K(null)}}):null,H&&Object(q.jsx)("div",{className:"dialog-box-container",onClick:W,children:Object(q.jsxs)("div",{className:"dialog-box",onClick:function(e){return e.stopPropagation()},children:["/"!==s.pathname?null:Object(q.jsx)("button",{className:"text",onClick:function(){return c.push("/p/".concat(k.id))},children:"Go to post"}),"/"!==s.pathname?null:Object(q.jsx)("button",{className:"text",onClick:function(){navigator.clipboard.writeText("".concat(window.location.origin,"/#/p/").concat(t)),W()},children:"Copy Link"}),l.user.uid===k.user&&Object(q.jsx)("button",{className:"remove text",onClick:ae,children:"Delete"}),Object(q.jsx)("button",{className:"cancel text",onClick:W,children:"Cancel"})]})}),Object(q.jsxs)("div",{className:"poster",children:[Object(q.jsx)(i.b,{to:"/".concat(d.username),children:Object(q.jsx)("div",{className:"profile-pic outlined round",children:Object(q.jsx)("img",{src:d.profilePic,alt:"Profile Pic"})})}),Object(q.jsx)(i.b,{to:"/".concat(d.username),className:"username",children:d.username}),Object(q.jsx)("button",{className:"icon",style:{width:15,height:15},onClick:function(){return X(!0)},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M6 12c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm9 0c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm9 0c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"})})})]}),Object(q.jsx)("div",{className:"post-photo",children:Object(q.jsx)("div",{className:"container",children:Object(q.jsx)("img",{src:k.photo,alt:k.caption})})}),Object(q.jsxs)("div",{className:"side",children:[Object(q.jsxs)("div",{className:"info",children:[Object(q.jsxs)("div",{className:"interactions",children:[Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)(he,{target:k,postPath:O}),Object(q.jsx)("button",{className:"comment-bubble icon",children:Object(q.jsx)("svg",{width:"25",height:"25",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M12 1c-6.338 0-12 4.226-12 10.007 0 2.05.739 4.063 2.047 5.625l-1.993 6.368 6.946-3c1.705.439 3.334.641 4.864.641 7.174 0 12.136-4.439 12.136-9.634 0-5.812-5.701-10.007-12-10.007m0 1c6.065 0 11 4.041 11 9.007 0 4.922-4.787 8.634-11.136 8.634-1.881 0-3.401-.299-4.946-.695l-5.258 2.271 1.505-4.808c-1.308-1.564-2.165-3.128-2.165-5.402 0-4.966 4.935-9.007 11-9.007"})})})]}),Object(q.jsx)(xe,{target:k})]}),Object(q.jsxs)("span",{className:"likes",onClick:function(){return K(k.likes)},children:[Object(q.jsx)("span",{className:"number",children:k.likes.length})," likes"]})]}),Object(q.jsxs)("div",{className:"comments",children:[0===k.caption.length||Object(q.jsx)(me,{commentData:{user:k.user,comment:k.caption,timestamp:k.timestamp},noLike:!0,noPhoto:!0,noTimestamp:!0,noLikesCounter:!0}),P.length>2&&Object(q.jsxs)(i.b,{to:"/p/".concat(t),style:{color:"#8e8e8e",fontSize:"0.9em",fontWeight:"500"},children:["View all ",P.length," comments"]}),P.slice(0,2).map((function(e){return Object(q.jsx)(me,{commentData:e,postPath:O,setLikesWindow:K,refreshComments:re,noPhoto:!0,noTimestamp:!0,noLikesCounter:!0,noRemove:!0},e.id)})),Object(q.jsx)("span",{className:"timestamp",title:Object(le.a)(Object(Ae.a)(k.timestamp.seconds),"d MMM, yyyy"),children:(new Date).getTime()/1e3-k.timestamp.seconds>604800?Object(je.a)(Object(Ae.a)(k.timestamp.seconds))===Object(je.a)(new Date)?Object(le.a)(Object(Ae.a)(k.timestamp.seconds),"d MMMM"):Object(le.a)(Object(Ae.a)(k.timestamp.seconds),"d MMMM, yyyy"):Object(de.a)(Object(Ae.a)(k.timestamp.seconds))})]}),Object(q.jsxs)("form",{className:"add-comment-container",onSubmit:ce,children:[Object(q.jsx)("textarea",{className:Q?"add-comment disabled":"add-comment",placeholder:"Add a comment...",ref:a,onChange:function(){return a.current.value.length>0?T(!0):T(!1)},onKeyDown:se}),Object(q.jsx)("button",{className:"".concat(L?"text":"text disabled"),children:"Post"})]})]})]}):Object(q.jsxs)("div",{className:"post-window outlined ".concat(ee?"disabled":""),children:[Y?Object(q.jsx)(Oe,{title:"Likes",uids:Y,closeFollowListWindow:function(){return K(null)}}):null,H&&Object(q.jsx)("div",{className:"dialog-box-container",onClick:W,children:Object(q.jsxs)("div",{className:"dialog-box",onClick:function(e){return e.stopPropagation()},children:[l.user.uid===k.user&&Object(q.jsx)("button",{className:"remove text",onClick:ae,children:"Delete"}),Object(q.jsx)("button",{className:"cancel text",onClick:W,children:"Cancel"})]})}),Object(q.jsx)("img",{src:k.photo,alt:k.caption}),Object(q.jsxs)("div",{className:"side",children:[Object(q.jsxs)("div",{className:"poster",children:[Object(q.jsx)(i.b,{to:"/".concat(d.username),children:Object(q.jsx)("div",{className:"profile-pic outlined round",children:Object(q.jsx)("img",{src:d.profilePic,alt:"Profile Pic"})})}),Object(q.jsx)(i.b,{to:"/".concat(d.username),className:"username",children:d.username}),Object(q.jsx)(fe,{size:15,user:d,marginLeft:7.5}),k.user===l.user.uid&&Object(q.jsx)("button",{className:"icon",style:{width:15,height:15},onClick:function(){return X(!0)},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M6 12c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm9 0c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm9 0c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"})})}),l.info.uid===d.uid?null:Object(q.jsx)(pe,{target:d})]}),Object(q.jsxs)("div",{className:"comments",children:[0===k.caption.length||Object(q.jsx)(me,{commentData:{user:k.user,comment:k.caption,timestamp:k.timestamp},noLike:!0,noLikesCounter:!0}),P.map((function(e){return Object(q.jsx)(me,{commentData:e,postPath:O,setLikesWindow:K,refreshComments:re},e.id)}))]}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsxs)("div",{className:"interactions",children:[Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)(he,{target:k,postPath:O}),Object(q.jsx)("button",{className:"comment-bubble icon",children:Object(q.jsx)("svg",{width:"25",height:"25",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M12 1c-6.338 0-12 4.226-12 10.007 0 2.05.739 4.063 2.047 5.625l-1.993 6.368 6.946-3c1.705.439 3.334.641 4.864.641 7.174 0 12.136-4.439 12.136-9.634 0-5.812-5.701-10.007-12-10.007m0 1c6.065 0 11 4.041 11 9.007 0 4.922-4.787 8.634-11.136 8.634-1.881 0-3.401-.299-4.946-.695l-5.258 2.271 1.505-4.808c-1.308-1.564-2.165-3.128-2.165-5.402 0-4.966 4.935-9.007 11-9.007"})})})]}),Object(q.jsx)(xe,{target:k})]}),Object(q.jsxs)("span",{className:"likes",onClick:function(){return K(k.likes)},children:[Object(q.jsx)("span",{className:"number",children:k.likes.length})," likes"]}),Object(q.jsx)("span",{className:"timestamp",title:Object(le.a)(Object(Ae.a)(k.timestamp.seconds),"d MMM, yyyy"),children:Object(je.a)(Object(Ae.a)(k.timestamp.seconds))===Object(je.a)(new Date)?Object(le.a)(Object(Ae.a)(k.timestamp.seconds),"d MMMM"):Object(le.a)(Object(Ae.a)(k.timestamp.seconds),"d MMMM, yyyy")})]}),Object(q.jsxs)("form",{className:"add-comment-container",onSubmit:ce,children:[Object(q.jsx)("textarea",{className:Q?"add-comment disabled":"add-comment",placeholder:"Add a comment...",ref:a,onChange:function(){return a.current.value.length>0?T(!0):T(!1)},onKeyDown:se}),Object(q.jsx)("button",{className:"".concat(L?"text":"text disabled"),children:"Post"})]})]})]}):null},ge=function(){var e=Object(r.useRef)(),t=Object(o.b)(),n=Object(o.c)((function(e){return e.currentUser.info})),c=Object(r.useState)(null),s=Object(v.a)(c,2),a=s[0],i=s[1],u=Object(r.useState)(0),l=Object(v.a)(u,2),A=l[0],j=l[1],d=Object(r.useState)(null),b=Object(v.a)(d,2),p=b[0],f=b[1],O=Object(r.useState)(null),h=Object(v.a)(O,2),g=h[0],w=h[1],N=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight;j(e/t*100)};return Object(r.useEffect)(N,[]),Object(r.useEffect)((function(){return document.title="Instadicey"}),[]),Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){var r,c,s,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return t({type:"START_LOADING"}),e.next=5,Object(D.h)(Object(D.g)(E,"users",n.uid,"user_follows","following")).then((function(e){return e.data()})).then((function(e){return e?e.following:[]}));case 5:if(!((r=e.sent).length>0)){e.next=17;break}return c=new Date((new Date).getTime()-2592e5),i(c),s=Object(D.n)(Object(D.d)(E,"user_posts"),Object(D.s)("user","in",r),Object(D.s)("timestamp",">=",c)),e.next=12,Object(D.i)(s).then((function(e){return e.docs.map((function(e){return e.data()}))}));case 12:a=(a=e.sent).sort((function(e,t){return e.timestamp.seconds<t.timestamp.seconds?1:-1})),w(a),e.next=18;break;case 17:w([]);case 18:t({type:"STOP_LOADING"});case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,t]),Object(r.useEffect)((function(){A<75||!a||p||function(){var e=Object(x.a)(m.a.mark((function e(){var t,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.h)(Object(D.g)(E,"users",n.uid,"user_follows","following")).then((function(e){return e.data().following}));case 2:if(!((t=e.sent).length>0)){e.next=12;break}return r=Object(D.n)(Object(D.d)(E,"user_posts"),Object(D.s)("user","in",t),Object(D.s)("timestamp","<=",a)),e.next=7,Object(D.i)(r).then((function(e){return e.docs.map((function(e){return e.data()}))}));case 7:c=(c=e.sent).sort((function(e,t){return e.timestamp.seconds<t.timestamp.seconds?1:-1})),f(c),e.next=13;break;case 12:f([]);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[A,n,a]),Object(r.useEffect)((function(){return window.addEventListener("scroll",N),function(){window.removeEventListener("scroll",N)}}),[e]),g?Object(q.jsxs)("div",{className:"home-page",children:[g&&Object(q.jsx)("div",{className:"posts",ref:e,children:g.map((function(e){return Object(q.jsx)(ve,{postID:e.id,isVertical:!0},e.id)}))}),p&&Object(q.jsxs)("div",{className:"older-posts posts",ref:e,children:[Object(q.jsx)("h2",{children:"Showing posts older than 3 days"}),p.map((function(e){return Object(q.jsx)(ve,{postID:e.id,isVertical:!0},e.id)}))]})]}):null},we=function(){return Object(q.jsxs)("div",{id:"broken-page",children:[Object(q.jsx)("h1",{children:"Sorry, this page isn't available."}),Object(q.jsx)("h2",{children:"The link you followed may be broken, or the page may have been removed."})]})},Ne=function(e){var t=e.postID,n=Object(r.useState)(!1),c=Object(v.a)(n,2),s=c[0],a=c[1],o=Object(r.useState)(null),u=Object(v.a)(o,2),l=u[0],A=u[1],j=Object(r.useState)(null),d=Object(v.a)(j,2),b=d[0],p=d[1],f=function(){var e=Object(x.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.i)(Object(D.n)(Object(D.d)(E,"user_posts"),Object(D.s)("id","==",t))).then((function(e){return e.docs[0]}));case 2:return n=e.sent,A(n.data()),e.abrupt("return",n.ref.path);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.i)(Object(D.c)(E,"".concat(t,"/comments"))).then((function(e){return e.docs.map((function(e){return e.data()}))}));case 2:n=e.sent,p(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return t=e.sent,e.next=5,O(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l&&b?Object(q.jsx)("div",{className:"post-card",onMouseOver:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)(i.b,{to:"/p/".concat(l.id),children:[s&&Object(q.jsxs)("div",{className:"hovered",children:[Object(q.jsxs)("span",{children:[Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z"})})," ",l.likes.length]}),Object(q.jsxs)("span",{children:[Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"comment-bubble",width:"20",height:"20",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M.054 23c.971-1.912 2.048-4.538 1.993-6.368-1.308-1.562-2.047-3.575-2.047-5.625 0-5.781 5.662-10.007 12-10.007 6.299 0 12 4.195 12 10.007 0 6.052-6.732 11.705-15.968 9.458-1.678 1.027-5.377 2.065-7.978 2.535z"})})," ",b.length]})]}),Object(q.jsx)("img",{src:l.photo,alt:l.caption})]})})}):Object(q.jsx)("div",{className:"post-card loading outlined",children:Object(q.jsx)("div",{className:"container",children:Object(q.jsx)("img",{src:W,alt:"loading",style:{height:"25%",position:"absolute",inset:0,margin:"auto"}})})})},ke=(n(145),function(){var e=Object(g.h)().username,t=Object(o.b)(),n=Object(o.c)((function(e){return e.currentUser})),c=Object(r.useState)(null),s=Object(v.a)(c,2),a=s[0],u=s[1],l=Object(r.useState)(null),A=Object(v.a)(l,2),j=A[0],d=A[1],b=Object(r.useState)([]),p=Object(v.a)(b,2),f=p[0],O=p[1],h=Object(r.useState)(!1),w=Object(v.a)(h,2),N=w[0],k=w[1],y=Object(r.useState)(!1),C=Object(v.a)(y,2),S=C[0],P=C[1],z=function(){k(!1),P(!1)},I=function(){var t=Object(x.a)(m.a.mark((function t(){var n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(D.c)(E,"users"),r=Object(D.n)(n,Object(D.s)("username","==",e)),t.next=4,Object(D.i)(r);case 4:return c=t.sent,t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(D.i)(Object(D.c)(E,"users",t,"user_follows")).then((function(e){return Object.assign.apply(Object,[{}].concat(Object(be.a)(e.docs.map((function(e){return e.data()})))))}));case 3:!1===!!(n=e.sent).following&&(n.following=[]),!1===!!n.followers&&(n.followers=[]),d(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error getting user follows",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.i)(Object(D.c)(E,"users",t,"user_posts"));case 2:n=e.sent,r=n.docs.map((function(e){return e.data()})).sort((function(e,t){return e.timestamp.seconds>t.timestamp.seconds?-1:1})),O(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:if(0!==(t=e.sent).size){e.next=5;break}return e.abrupt("return",u(!1));case 5:return n=t.docs[0].data(),1===t.size&&u(n),e.next=9,L(n.uid);case 9:return e.next=11,U(n.uid);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){z(),function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START_LOADING"}),e.next=3,T();case 3:t({type:"STOP_LOADING"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[e]),Object(r.useEffect)((function(){a&&(a.realName?document.title="".concat(a.realName," (@").concat(a.username,") \u2022 Instadicey"):document.title="@".concat(a.username," \u2022 Instadicey"))}),[a]),!1===a?Object(q.jsx)(we,{}):a&&n&&j?Object(q.jsxs)("div",{className:"user-profile",children:[N?Object(q.jsx)(Oe,{title:"Following",uids:j.following,closeFollowListWindow:z}):S?Object(q.jsx)(Oe,{title:"Followers",uids:j.followers,closeFollowListWindow:z}):null,Object(q.jsx)("div",{className:"upper",children:Object(q.jsxs)("div",{className:"personal-info",children:[Object(q.jsx)("div",{className:"profile-pic",children:Object(q.jsx)("img",{src:a.profilePic,alt:"".concat(e,"'s profile pic")})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsxs)("div",{className:"name",children:[a.username,Object(q.jsx)(fe,{user:a}),n&&a.uid===n.info.uid?Object(q.jsx)(i.b,{to:"/accounts/edit",className:"edit-profile-btn outlined",children:"Edit Profile"}):Object(q.jsx)(pe,{target:a})]}),Object(q.jsxs)("div",{className:"follow",children:[Object(q.jsxs)("span",{className:"posts",children:[Object(q.jsx)("span",{className:"number",children:f.length})," posts"]}),Object(q.jsxs)("span",{className:"followers",onClick:function(){return P(!0)},children:[Object(q.jsx)("span",{className:"number",children:j.followers.length})," followers"]}),Object(q.jsxs)("span",{className:"following",onClick:function(){return k(!0)},children:[Object(q.jsx)("span",{className:"number",children:j.following.length})," following"]})]}),Object(q.jsxs)("div",{className:"bio",children:[Object(q.jsx)("span",{className:"real-name",children:a.realName}),Object(q.jsx)("div",{className:"bio-text",children:a.bio})]})]})]})}),Object(q.jsx)("nav",{children:Object(q.jsxs)("ul",{children:[Object(q.jsx)("li",{children:Object(q.jsxs)(i.c,{exact:!0,to:"/".concat(a.username),activeClassName:"selected",children:[Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M6 6h-6v-6h6v6zm9-6h-6v6h6v-6zm9 0h-6v6h6v-6zm-18 9h-6v6h6v-6zm9 0h-6v6h6v-6zm9 0h-6v6h6v-6zm-18 9h-6v6h6v-6zm9 0h-6v6h6v-6zm9 0h-6v6h6v-6z"})})," POSTS"]})}),n.user.uid===a.uid&&Object(q.jsx)("li",{children:Object(q.jsxs)(i.c,{exact:!0,to:"/".concat(a.username,"/saved"),activeClassName:"selected",children:[Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon",viewBox:"0 0 24 24",children:Object(q.jsx)("path",{d:"M16 2v17.582l-4-3.512-4 3.512v-17.582h8zm2-2h-12v24l6-5.269 6 5.269v-24z"})})," SAVED"]})})]})}),Object(q.jsxs)(g.c,{children:[Object(q.jsx)(g.a,{exact:!0,path:"/:username",children:Object(q.jsx)("div",{className:"post-cards-container",children:f.map((function(e){return Object(q.jsx)(Ne,{postID:e.id},e.id)}))})}),Object(q.jsx)(g.a,{exact:!0,path:"/:username/saved",children:Object(q.jsx)("div",{className:"post-cards-container",children:n.user.uid===a.uid&&a.saved.map((function(e){return Object(q.jsx)(Ne,{postID:e},e)}))})})]})]}):Object(q.jsx)(Y,{})}),ye=n(110),Ce=function(){var e=function(e){return new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))};function t(e){return e*Math.PI/180}return{getCroppedImg:function(){var n=Object(x.a)(m.a.mark((function n(r,c){var s,a,i,o,u,l,A,j=arguments;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=j.length>2&&void 0!==j[2]?j[2]:0,n.next=3,e(r);case 3:return a=n.sent,i=document.createElement("canvas"),o=i.getContext("2d"),u=Math.max(a.width,a.height),l=u/2*Math.sqrt(2)*2,i.width=l,i.height=l,o.translate(l/2,l/2),o.rotate(t(s)),o.translate(-l/2,-l/2),o.drawImage(a,l/2-.5*a.width,l/2-.5*a.height),A=o.getImageData(0,0,l,l),i.width=c.width,i.height=c.height,o.putImageData(A,Math.round(0-l/2+.5*a.width-c.x),Math.round(0-l/2+.5*a.height-c.y)),n.abrupt("return",new Promise((function(e){return i.toBlob((function(t){return e(t)}),"image/png")})));case 19:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}(),Se=function(){var e=Object(o.c)((function(e){return e.currentUser})),t=Object(o.c)((function(e){return e.newPost})),n=Object(r.useState)(""),c=Object(v.a)(n,2),s=c[0],a=c[1],i=Object(r.useState)({x:0,y:0}),u=Object(v.a)(i,2),l=u[0],A=u[1],j=Object(r.useState)(1),d=Object(v.a)(j,2),b=d[0],p=d[1],f=Object(r.useState)(0),h=Object(v.a)(f,2),w=h[0],N=h[1],k=Object(r.useState)(null),y=Object(v.a)(k,2),C=y[0],S=y[1];Object(r.useEffect)((function(){return I(e?{type:"STOP_LOADING"}:{type:"START_LOADING"})}),[s,e]),Object(r.useEffect)((function(){if(t){var e=new FileReader;e.readAsDataURL(t),e.onloadend=function(){return a(e.result)}}}),[t]);var P=Object(r.useRef)(),I=Object(o.b)(),U=Object(g.f)();Object(r.useEffect)((function(){return O.getState().newPost?function(){return I(Z(null))}:U.push("/")}),[]);var L=Ce.getCroppedImg,T=function(){var t=Object(x.a)(m.a.mark((function t(){var n,r,c,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I({type:"START_LOADING"}),n=Object(ue.a)(32),r=P.current.value,t.next=6,L(s,C,w);case 6:return c=t.sent,a=Object(ae.c)(z,"users/".concat(e.user.uid,"/posts/").concat(n,".png")),t.next=10,Object(ae.d)(a,c);case 10:return t.next=12,Object(ae.a)(a);case 12:return i=t.sent,t.next=15,Object(D.q)(Object(D.g)(E,"users",e.user.uid,"user_posts",n),{photo:i,caption:r,user:e.user.uid,likes:[],id:n,timestamp:Object(D.p)()});case 15:I(B("Post uploaded.","success")),U.push("/p/".concat(n)),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(0),I({type:"STOP_LOADING"}),console.error(t.t0),I(B("Oops, try again later.","error"));case 24:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}();return e&&s?Object(q.jsxs)("div",{className:"new-post",children:[Object(q.jsxs)("div",{className:"header",children:[Object(q.jsx)("button",{className:"cancel text",onClick:function(){return U.push("/")},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-x-lg",viewBox:"0 0 16 16",children:Object(q.jsx)("path",{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"})})}),"New Photo Post",Object(q.jsx)("button",{className:"text",onClick:T,children:"Share"})]}),Object(q.jsx)("div",{className:"cropper-container",children:Object(q.jsx)(ye.a,{image:s,crop:l,zoom:b,zoomSpeed:.5,onCropChange:A,onZoomChange:p,onRotationChange:N,onCropComplete:function(e,t){return S(t)},aspect:1})}),Object(q.jsxs)("div",{className:"caption-container outlined",children:[Object(q.jsx)("div",{className:"profile-pic outlined round",children:Object(q.jsx)("img",{src:e.info.profilePic,alt:"profile pic"})}),Object(q.jsx)("textarea",{className:"caption",placeholder:"Write a caption...",ref:P})]})]}):null},Ee=(n(150),function(){var e=Object(g.h)().postID,t=Object(o.b)(),n=Object(r.useState)(!1),c=Object(v.a)(n,2),s=c[0],a=c[1],i=Object(r.useState)(null),u=Object(v.a)(i,2),l=u[0],A=u[1],j=Object(r.useState)(!1),d=Object(v.a)(j,2),b=d[0],p=d[1],f=function(){return window.innerWidth<1024?p(!0):p(!1)};Object(r.useEffect)((function(){return f(),window.addEventListener("resize",f),function(){return window.removeEventListener("resize",f)}}),[]);var O=function(){var n=Object(x.a)(m.a.mark((function n(){var r,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:"START_LOADING"}),r=Object(D.n)(Object(D.d)(E,"user_posts"),Object(D.s)("id","==",e)),n.next=5,Object(D.i)(r);case 5:if((c=n.sent).docs[0]){n.next=8;break}throw Error("Post doesn't exist");case 8:a(!0),h(c.docs[0].data()),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0),"Post doesn't exist"===n.t0.message&&a(!1);case 16:t({type:"STOP_LOADING"});case 17:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(){return n.apply(this,arguments)}}(),h=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(D.n)(Object(D.c)(E,"users/".concat(t.user,"/user_posts")),Object(D.s)("id","!=",t.id),Object(D.k)(6)),e.next=3,Object(D.i)(n).then((function(e){return e.docs.map((function(e){return e.data()})).sort((function(e,t){return e.timestamp.seconds<t.timestamp.seconds?1:-1}))}));case 3:r=e.sent,console.error(r),A(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a(!1),O()}),[e]),s?Object(q.jsxs)("div",{className:"post-page",children:[b?Object(q.jsx)(ve,{postID:e,isVertical:!0}):Object(q.jsx)(ve,{postID:e}),Object(q.jsxs)("div",{className:"more-posts",children:[Object(q.jsx)("header",{children:"More posts from this user"}),l&&Object(q.jsx)("div",{className:"post-cards-container",children:l.map((function(e){return Object(q.jsx)(Ne,{postID:e.id},e.id)}))})]})]}):Object(q.jsx)(we,{})}),Pe=function(e){var t=e.messageInfo,n=e.userInfo,r=e.noPhoto,c=e.isSent;return Object(q.jsxs)("div",{className:"message ".concat(c?"sent":""),children:[r?Object(q.jsx)("span",{className:"dummy",style:{width:32,height:32}}):Object(q.jsx)(i.b,{to:"/".concat(n.username),className:"profile-pic",children:Object(q.jsx)("img",{src:n.profilePic,alt:"".concat(n.username,"'s profile pic")})}),Object(q.jsx)("span",{className:"text outlined round",children:t.message})]})},ze=function(e){var t=e.roomID,n=Object(g.f)(),c=Object(o.c)((function(e){return e.currentUser})),s=Object(r.useRef)(),a=Object(r.useState)(null),u=Object(v.a)(a,2),l=u[0],A=u[1],j=Object(r.useState)(null),d=Object(v.a)(j,2),b=d[0],p=d[1],f=Object(r.useState)(!1),O=Object(v.a)(f,2),h=O[0],w=O[1],N=function(){var e=Object(x.a)(m.a.mark((function e(){var r,s,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(D.h)(Object(D.g)(E,"chats",t)).then((function(e){return e.data()}));case 3:if(r=e.sent){e.next=6;break}throw new Error("Room doesn't exist");case 6:return s=r.members.filter((function(e){return e!==c.info.uid}))[0],e.next=9,Object(D.h)(Object(D.g)(E,"users",s)).then((function(e){return e.data()}));case 9:return a=e.sent,A(a),e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),"Room doesn't exist"===e.t0.message&&n.push("/direct/inbox");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(m.a.mark((function e(){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(D.n)(Object(D.c)(E,"chats",t,"messages"),Object(D.m)("timestamp","asc")),e.next=4,Object(D.i)(n).then((function(e){return e.docs.map((function(e){return e.data()}))}));case 4:r=e.sent,p(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(m.a.mark((function e(n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,w(!0),r=s.current.value,a=Object(ue.a)(32),""!==r.trim()){e.next=7;break}throw new Error("Message is empty");case 7:return e.next=9,Promise.all([Object(D.q)(Object(D.g)(E,"chats",t,"messages",a),{id:a,message:r,user:c.user.uid,timestamp:Object(D.p)()}),Object(D.r)(Object(D.g)(E,"chats",t),{lastMessage:{id:a,message:r},lastUpdated:Object(D.p)()})]);case 9:s.current.value="",w(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return document.title="Instadicey \u2022 Chats"})),Object(r.useEffect)((function(){var e=Object(D.n)(Object(D.c)(E,"chats",t,"messages"),Object(D.m)("timestamp","asc")),n=Object(D.l)(e,(function(e){return p(e.docs.map((function(e){return e.data()})))}));return function(){return n()}}),[t]),Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N()&&k();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),l&&b?Object(q.jsxs)("div",{className:"chat-room",children:[Object(q.jsx)("header",{children:Object(q.jsxs)(i.b,{to:"/".concat(l.username),style:{display:"flex",alignItems:"center"},children:[Object(q.jsx)("span",{className:"profile-pic",style:{marginRight:"1rem"},children:Object(q.jsx)("img",{src:l.profilePic,alt:"".concat(l.username,"'s pic")})}),l.username]})}),Object(q.jsx)("div",{className:"messages",children:Object(q.jsx)("div",{className:"container",children:b.map((function(e,t,n){return e.user===c.user.uid?Object(q.jsx)(Pe,{messageInfo:e,userInfo:c.info,noPhoto:!0,isSent:!0},e.id):n[t+1]&&n[t].user===n[t+1].user?Object(q.jsx)(Pe,{messageInfo:e,userInfo:l,noPhoto:!0},e.id):Object(q.jsx)(Pe,{messageInfo:e,userInfo:l},e.id)}))})}),Object(q.jsx)("div",{className:"send-message-container",children:Object(q.jsxs)("form",{className:"outlined round",onSubmit:y,children:[Object(q.jsx)("input",{className:"".concat(h?"disabled":""),placeholder:"Message...",ref:s}),Object(q.jsx)("button",{className:"text",children:"Send"})]})})]}):null},Ie=(n(151),function(){var e=Object(g.h)().roomID,t=Object(o.c)((function(e){return e.currentUser})),n=Object(r.useState)(null),c=Object(v.a)(n,2),s=c[0],a=c[1],u=Object(r.useState)(null),l=Object(v.a)(u,2),A=l[0],d=l[1],b=Object(r.useState)(!1),p=Object(v.a)(b,2),f=p[0],O=p[1],h=function(){return O(!1)},w=Object(F.useMediaQuery)({query:"(max-width: 600px)"}),N=function(e){var t=e.split(" ");return t[1]=t[1].slice(0,1),t.join(" ")},k=function(){var e=Object(x.a)(m.a.mark((function e(){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n=Object(D.n)(Object(D.c)(E,"chats"),Object(D.s)("members","array-contains",t.user.uid)),e.next=6,Object(D.i)(n).then((function(e){return e.docs.map((function(e){return e.data()}))})).then((function(e){return e.filter((function(e){return!!e.lastMessage&&e}))})).then((function(e){return e.sort((function(e,t){return e.lastUpdated<t.lastUpdated?1:-1}))})).then((function(e){return Promise.all(e.map(function(){var e=Object(x.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.h)(Object(D.g)(E,"users",n.members.filter((function(e){return e!==t.user.uid}))[0])).then((function(e){return e.data()}));case 2:return r=e.sent,e.abrupt("return",Object(j.a)(Object(j.a)({},n),{},{otherUser:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}));case 6:r=e.sent,d(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(D.i)(Object(D.c)(E,"users",t.user.uid,"user_follows")).then((function(e){return Object.assign.apply(Object,[{}].concat(Object(be.a)(e.docs.map((function(e){return e.data()})))))}));case 5:(n=e.sent).following||(n.following=[]),n.followers||(n.followers=[]),a(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return document.title="Inbox \u2022 Chats"})),Object(r.useEffect)((function(){return y()}),[t]),Object(r.useEffect)((function(){return k()}),[t]),Object(r.useEffect)((function(){if(t){var e=Object(D.n)(Object(D.c)(E,"chats"),Object(D.s)("members","array-contains",t.user.uid)),n=Object(D.l)(e,function(){var e=Object(x.a)(m.a.mark((function e(n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.docs.map((function(e){return e.data()})).filter((function(e){return!!e.lastMessage&&e})).sort((function(e,t){return e.lastUpdated<t.lastUpdated?1:-1})),e.next=3,Promise.all(r.map(function(){var e=Object(x.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.h)(Object(D.g)(E,"users",n.members.filter((function(e){return e!==t.user.uid}))[0])).then((function(e){return e.data()}));case 2:return r=e.sent,e.abrupt("return",Object(j.a)(Object(j.a)({},n),{},{otherUser:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:c=e.sent,d(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return n()}}}),[t]),t&&A?w?Object(q.jsxs)("div",{className:"inbox-window outlined",children:[f&&Object(q.jsx)(Oe,{title:"New Message",uids:[].concat(Object(be.a)(s.following),Object(be.a)(s.followers)),closeFollowListWindow:h,newMessage:!0}),Object(q.jsx)("div",{className:"container",children:Object(q.jsxs)(g.c,{children:[Object(q.jsx)(g.a,{exact:!0,path:"/direct/inbox",children:Object(q.jsxs)("div",{className:"recent-chats left",children:[Object(q.jsxs)("header",{children:[t.info.username,Object(q.jsx)("button",{className:"icon",onClick:function(){return O(!0)},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M8.071 21.586l-7.071 1.414 1.414-7.071 14.929-14.929 5.657 5.657-14.929 14.929zm-.493-.921l-4.243-4.243-1.06 5.303 5.303-1.06zm9.765-18.251l-13.3 13.301 4.242 4.242 13.301-13.3-4.243-4.243z"})})})]}),Object(q.jsx)("ul",{children:A.map((function(e){return Object(q.jsx)(i.c,{to:"/direct/t/".concat(e.id),activeClassName:"selected",children:Object(q.jsxs)("li",{children:[Object(q.jsx)("span",{className:"profile-pic",children:Object(q.jsx)("img",{src:e.otherUser.profilePic,alt:"".concat(e.otherUser.currentUser,"'s profile pic")})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("span",{className:"username",children:e.otherUser.username}),Object(q.jsxs)("div",{className:"message",children:[Object(q.jsx)("div",{children:e.lastMessage.message}),Object(q.jsxs)("span",{children:["\u2022 ",N(Object(de.a)(Object(Ae.a)(e.lastUpdated?e.lastUpdated.seconds:0)))]})]})]})]},e.otherUser.uid)},e.id)}))})]})}),Object(q.jsx)(g.a,{path:"/direct/t/:roomID",children:Object(q.jsx)(ze,{roomID:e})})]})})]}):Object(q.jsxs)("div",{className:"inbox-window outlined",children:[f&&Object(q.jsx)(Oe,{title:"New Message",uids:[].concat(Object(be.a)(s.following),Object(be.a)(s.followers)),closeFollowListWindow:h,newMessage:!0}),Object(q.jsxs)("div",{className:"container",children:[Object(q.jsxs)("div",{className:"recent-chats left",children:[Object(q.jsxs)("header",{children:[t.info.username,Object(q.jsx)("button",{className:"icon",onClick:function(){return O(!0)},children:Object(q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fillRule:"evenodd",clipRule:"evenodd",children:Object(q.jsx)("path",{d:"M8.071 21.586l-7.071 1.414 1.414-7.071 14.929-14.929 5.657 5.657-14.929 14.929zm-.493-.921l-4.243-4.243-1.06 5.303 5.303-1.06zm9.765-18.251l-13.3 13.301 4.242 4.242 13.301-13.3-4.243-4.243z"})})})]}),Object(q.jsx)("ul",{children:A.map((function(e){return Object(q.jsx)(i.c,{to:"/direct/t/".concat(e.id),activeClassName:"selected",children:Object(q.jsxs)("li",{children:[Object(q.jsx)("span",{className:"profile-pic",children:Object(q.jsx)("img",{src:e.otherUser.profilePic,alt:"".concat(e.otherUser.currentUser,"'s profile pic")})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsx)("span",{className:"username",children:e.otherUser.username}),Object(q.jsxs)("div",{className:"message",children:[Object(q.jsx)("div",{children:e.lastMessage.message}),Object(q.jsxs)("span",{children:["\u2022 ",N(Object(de.a)(Object(Ae.a)(e.lastUpdated?e.lastUpdated.seconds:0)))]})]})]})]},e.otherUser.uid)},e.id)}))})]}),Object(q.jsx)("div",{className:"chat-window right",children:Object(q.jsxs)(g.c,{children:[Object(q.jsx)(g.a,{exact:!0,path:"/direct/inbox",children:"Inbox"}),Object(q.jsx)(g.a,{path:"/direct/t/:roomID",children:Object(q.jsx)(ze,{roomID:e})})]})})]})]}):Object(q.jsx)(Y,{})}),De=(n(152),function(){var e=Object(o.b)(),t=Object(g.g)(),n=Object(r.useState)(!0),c=Object(v.a)(n,2),s=c[0],a=c[1],i=Object(o.c)((function(e){return e.currentUser})),u=Object(o.c)((function(e){return e.loading})),l=Object(o.c)((function(e){return e.snackbar}));l.handleClose=function(){return e({type:"CLOSE_SNACKBAR"})},Object(r.useEffect)((function(){var e=t.pathname;a("/create/style"!==e)}),[t.pathname]);return Object(r.useEffect)((function(){Object(I.f)(P,function(){var t=Object(x.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!n.emailVerified){t.next=8;break}return t.next=3,Object(D.h)(Object(D.g)(E,"users",n.uid)).then((function(e){return e.data()}));case 3:r=t.sent,e(R({user:n,info:r})),e({type:"STOP_LOADING"}),t.next=10;break;case 8:e(R(null)),e({type:"STOP_LOADING"});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e]),Object(q.jsxs)("div",{className:"App",style:i&&s?{paddingTop:"75px"}:null,children:[i&&s?Object(q.jsx)(V,{}):null,u?Object(q.jsx)(g.a,{path:"/",component:Y}):null,Object(q.jsxs)(g.c,{children:[Object(q.jsx)(g.a,{exact:!0,path:"/",children:i?Object(q.jsx)(ge,{}):Object(q.jsx)(ne,{})}),Object(q.jsx)(g.a,{exact:!0,path:"/accounts/email-signup",component:$}),Object(q.jsx)(g.a,{exact:!0,path:"/accounts/password-reset",component:te}),Object(q.jsx)(g.a,{path:"/accounts/verify",component:ce}),Object(q.jsx)(g.a,{exact:!0,path:"/accounts/edit",component:oe}),Object(q.jsx)(g.a,{exact:!0,path:"/accounts/password/change",component:oe}),Object(q.jsx)(g.a,{exact:!0,path:"/direct/inbox",component:Ie}),Object(q.jsx)(g.a,{exact:!0,path:"/direct/t/:roomID",component:Ie}),Object(q.jsx)(g.a,{exact:!0,path:"/:username",component:ke}),Object(q.jsx)(g.a,{exact:!0,path:"/:username/saved",component:ke}),Object(q.jsx)(g.a,{exact:!0,path:"/create/style",component:Se}),Object(q.jsx)(g.a,{exact:!0,path:"/p/:postID",component:Ee}),Object(q.jsx)(g.a,{path:"/",component:we})]}),Object(q.jsx)(U.a,{open:l.open,message:l.message,autoHideDuration:5e3,onClose:l.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},TransitionComponent:L.a,className:"snackbar",children:Object(q.jsx)(T.a,{onClose:l.handleClose,severity:l.severity,icon:!1,children:l.message})})]})});n(153);a.a.render(Object(q.jsx)(i.a,{children:Object(q.jsx)(o.a,{store:O,children:Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(De,{})})})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.5b51f02f.chunk.js.map